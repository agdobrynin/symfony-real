{% extends 'base.html.twig' %}

{% block title %}Main page of blog{% endblock %}

{% block body %}
    <div class="nav">
        <a href="{{ path("blog_gen") }}">Generate new posts</a>
        |
        <a href="{{ path("blog_destroy") }}">Delete all posts</a>
    </div>
    {% if posts %}
        {% if pageCount > 1 %}
            {{ include ("blog/paginator.html.twig", {"pageCount": pageCount}) }}
            <hr>
        {% endif %}
        {% for post in posts %}
            <h3>({{ loop.index }}) {{ post.title }}</h3>
            <h6>Date: {{ post.date|date }}</h6>
            <p>
                {{ post.content|text_by_percent(35) }}...
            </p>
            <div><a href="{{ path("blog_show", {uuid: post.uuid}) }}">read more...</a></div>
            {% if loop.index < loop.length %}
                <hr>
            {% endif %}
        {% endfor %}
        {% if pageCount > 1 %}
            <hr>
            {{ include ("blog/paginator.html.twig", {"pageCount": pageCount}) }}
        {% endif %}
    {% else %}
        <h4>Posts not found</h4>
    {% endif %}
{% endblock %}
